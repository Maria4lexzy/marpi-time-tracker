(this["webpackJsonpmarpi-time-tracker"]=this["webpackJsonpmarpi-time-tracker"]||[]).push([[0],{106:function(e,t,n){"use strict";n.r(t);var r,a,c=n(3),s=n(0),i=n.n(s),l=n(19),o=n.n(l),u=n(21),d=n(9),j=n.n(d),b=n(13),h=n(18),p=n(39);n(85),n(107);p.a.initializeApp({apiKey:"AIzaSyAeR8sMZVHVVHTraof6_TUIa0DtLsHofwE",authDomain:"mtt-dev-12744.firebaseapp.com",databaseUrl:"https://mtt-dev-12744-default-rtdb.europe-west1.firebasedatabase.app",projectId:"mtt-dev-12744",storageBucket:"mtt-dev-12744.appspot.com",messagingSenderId:"1024454555850",appId:"1:1024454555850:web:96d35e62cc349df1465c33"});var m=p.a.auth(),x=p.a.firestore(),O=new p.a.auth.GoogleAuthProvider,f=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=x.doc("users/".concat(t.uid)),e.next=5,n.get();case 5:return e.sent.exists||x.collection("users").orderBy("workingNumber","desc").limit(1).get().then((function(e){var r=1e3;e.docs.forEach((function(e){r=e.data().workingNumber})),v(t,n,r+1)})),e.next=9,g(t.uid);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(b.a)(j.a.mark((function e(t,n,c){var s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),s=t.email,null,console.log(s+null+r+a+c),e.prev=4,e.next=7,n.set({displayName:r,email:s,photoURL:null,roles:{admin:a[0],manager:a[1],worker:a[2]},workingNumber:c});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.error("Error creating user document",e.t0);case 12:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t,n,r){return e.apply(this,arguments)}}(),g=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,x.doc("users/".concat(t)).get().then((function(e){return e.exists?e.data():"No such document!"})).catch((function(e){return e}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(b.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.sendSignInLinkToEmail(t,n).then((function(){window.localStorage.setItem("emailForSignIn",t)})).catch((function(e){var t=e.code,n=e.message;return console.log(t),console.log("errorMessage"+n),e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.isSignInWithEmailLink(window.location.href)&&((t=window.localStorage.getItem("emailForSignIn"))||(t=window.localStorage.prompt("Please provide your email for confirmations")),m.signInWithEmailLink(t,window.location.href).then((function(e){window.localStorage.removeItem("emailForSignIn")})).catch((function(e){})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(b.a)(j.a.mark((function e(t,n,c,s){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t,a=s,e.next=5,m.createUserWithEmailAndPassword(n,c);case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),N=function(){var e=Object(b.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.signInWithEmailAndPassword(t,n).then((function(e){return e})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S="/calendar-test",I="/create-user",L="/signin",C="/pw-forget",A=n(112),E=n(119),D=n(117),F=n(114),P=n(66),R=n(64),T=n.n(R),G=function(){var e=Object(s.useRef)(),t=Object(s.useRef)(),n=Object(s.useState)(""),r=Object(h.a)(n,2),a=r[0],i=r[1],l=Object(s.useState)(!1),o=Object(h.a)(l,2),d=o[0],p=o[1];function x(){return(x=Object(b.a)(j.a.mark((function n(r){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),n.prev=1,i(""),p(!0),n.next=6,N(e.current.value,t.current.value);case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),i("Failed to sign in");case 11:p(!1);case 12:case"end":return n.stop()}}),n,null,[[1,8]])})))).apply(this,arguments)}return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(A.a,{className:"d-flex alighn-items-center justify-content-center mt-5",style:{minHeight:"100vh"},children:Object(c.jsxs)("div",{className:"w-100",style:{maxWidth:"400px"},children:[Object(c.jsx)(E.a,{children:Object(c.jsxs)(E.a.Body,{children:[Object(c.jsx)("h2",{className:"text-center",children:"Sign In"}),a&&Object(c.jsx)(D.a,{variant:"danger",children:a}),Object(c.jsxs)(F.a,{onSubmit:function(e){return x.apply(this,arguments)},children:[Object(c.jsxs)(F.a.Group,{id:"email",children:[Object(c.jsx)(F.a.Label,{children:"Email"}),Object(c.jsx)(F.a.Control,{type:"email",ref:e,required:!0,placeholder:"E.g: example@gmail.com"})]}),Object(c.jsxs)(F.a.Group,{id:"password",children:[Object(c.jsx)(F.a.Label,{children:"Password"}),Object(c.jsx)(F.a.Control,{type:"password",ref:t,required:!0})]}),Object(c.jsx)(P.a,{disabled:d,className:"w-100",type:"submit",children:"Sign In"})]}),Object(c.jsx)("p",{className:"text-center my-3",children:"or"}),Object(c.jsx)(T.a,{className:"w-100 text-center mt-3",onClick:function(e){e.preventDefault(),m.signInWithPopup(O)}}),Object(c.jsx)("div",{className:"w-100 text-center mt-3",children:Object(c.jsx)(u.a,{to:C,children:"Forgot Password"})})]})}),Object(c.jsxs)("div",{className:"w-100 text-center mt-2",children:["Need an account? ",Object(c.jsx)(u.a,{to:I,children:"Sign Up"})]})]})})})},U=n(115),W=n(71);function B(){var e=Object(s.useRef)(),t=Object(s.useRef)(),n=Object(s.useRef)(),r=Object(s.useRef)(),a=Object(s.useState)(""),i=Object(h.a)(a,2),l=i[0],o=i[1],d=Object(s.useState)(!1),p=Object(h.a)(d,2),m=p[0],x=p[1],O=Object(s.useState)([]),f=Object(h.a)(O,2),v=f[0],g=f[1];U.a;function w(){return(w=Object(b.a)(j.a.mark((function a(c){return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(console.log("button"),c.preventDefault(),n.current.value===r.current.value){a.next=4;break}return a.abrupt("return",o("Passwords do not match"));case 4:try{o(""),x(!0),k(t.current.value,e.current.value,n.current.value,v).then((function(e){void 0!=e.message&&o(e.message)}),(function(e){o(e.message)}))}catch(l){o(l.message),console.log(l)}x(!1);case 6:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(A.a,{className:"d-flex alighn-items-center justify-content-center",style:{minHeight:"100vh"},children:Object(c.jsxs)("div",{className:"w-100",style:{maxWidth:"400px"},children:[Object(c.jsx)(E.a,{children:Object(c.jsxs)(E.a.Body,{children:[Object(c.jsx)("h2",{className:"text-center",children:"Create New User"}),l&&Object(c.jsx)(D.a,{variant:"danger",children:l}),Object(c.jsxs)(F.a,{onSubmit:function(e){return w.apply(this,arguments)},children:[Object(c.jsxs)(F.a.Group,{id:"displayName",children:[Object(c.jsx)(F.a.Label,{children:"Username"}),Object(c.jsx)(F.a.Control,{type:"text",ref:t,required:!0})]}),Object(c.jsxs)(F.a.Group,{id:"email",children:[Object(c.jsx)(F.a.Label,{children:"Email"}),Object(c.jsx)(F.a.Control,{type:"email",ref:e,required:!0})]}),Object(c.jsxs)(F.a.Group,{id:"password",children:[Object(c.jsx)(F.a.Label,{children:"Password"}),Object(c.jsx)(F.a.Control,{type:"password",ref:n,required:!0})]}),Object(c.jsxs)(F.a.Group,{id:"password-confirm",children:[Object(c.jsx)(F.a.Label,{children:"Password Confirmation"}),Object(c.jsx)(F.a.Control,{type:"password",ref:r,required:!0})]}),Object(c.jsx)(P.a,{disabled:m,className:"w-100",type:"submit",children:"Register User"}),Object(c.jsxs)(F.a.Group,{id:"roles",children:[Object(c.jsx)(F.a.Label,{children:"User Role"}),Object(c.jsx)(W.a,{options:[{value:"admin",label:"Admin"},{value:"manager",label:"Manager"},{value:"worker",label:"Worker"}],isMulti:!0,className:"basic-multi-select",onChange:function(e){var t=[],n=!1,r=!1,a=!1;e.forEach((function(e){"admin"===e.value?n=!0:"manager"===e.value?r=!0:a=!0})),t.push(n),t.push(r),t.push(a),console.log(t),g(t)}}),v&&Object(c.jsx)("div",{style:{marginTop:20,lineHeight:"25px"},children:Object(c.jsxs)("div",{children:[Object(c.jsx)("b",{children:"Selected Value: "})," ",JSON.stringify(v,null,2)]})})]})]})]})}),Object(c.jsxs)("div",{className:"w-100 text-center mt-2",children:["Already have an account? ",Object(c.jsx)(u.a,{to:L,children:"Log In"})]})]})})})}var q=n(67),H=n(68),V=n(74),M=n(73),z=Object(s.createContext)({user:null}),J=function(e){Object(V.a)(n,e);var t=Object(M.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={user:null},e.componentDidMount=Object(b.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:m.onAuthStateChanged(function(){var t=Object(b.a)(j.a.mark((function t(n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f(n);case 2:r=t.sent,e.setState({user:r}),console.log(r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)}))),e}return Object(H.a)(n,[{key:"render",value:function(){return Object(c.jsx)(z.Provider,{value:this.state.user,children:this.props.children})}}]),n}(s.Component),K=function(){var e=Object(s.useContext)(z),t=e.photoURL,n=e.displayName,r=e.email;return Object(c.jsxs)("div",{className:"mx-auto w-11/12 md:w-2/4 py-8 px-4 md:px-8",children:[Object(c.jsxs)("div",{className:"flex border flex-col items-center md:flex-row md:items-start border-blue-400 px-3 py-4",children:[Object(c.jsx)("div",{style:{background:"url(".concat(t||"https://res.cloudinary.com/dqcsk8rsc/image/upload/v1577268053/avatar-1-bitmoji_upgwhc.png",")  no-repeat center center"),backgroundSize:"cover",height:"200px",width:"200px"},className:"border border-blue-300"}),Object(c.jsxs)("div",{className:"md:pl-4",children:[Object(c.jsx)("h2",{className:"text-2xl font-semibold",children:n}),Object(c.jsx)("h3",{className:"italic",children:r})]})]}),Object(c.jsx)("button",{className:"w-full py-3 bg-red-600 mt-4 text-white",onClick:function(){m.signOut()},children:"Sign out"})]})},_=function(){var e=Object(s.useState)(""),t=Object(h.a)(e,2),n=t[0],r=t[1],a=Object(s.useState)(!1),i=Object(h.a)(a,2),l=i[0],o=(i[1],Object(s.useState)(null)),d=Object(h.a)(o,2),j=d[0];d[1];return Object(c.jsxs)("div",{className:"mt-8",children:[Object(c.jsx)("h1",{className:"text-xl text-center font-bold mb-3",children:"Reset your Password"}),Object(c.jsxs)("div",{className:"border border-blue-300 mx-auto w-11/12 md:w-2/4 rounded py-8 px-4 md:px-8",children:[Object(c.jsxs)("form",{action:"",children:[l&&Object(c.jsx)("div",{className:"py-3 bg-green-400 w-full text-white text-center mb-3",children:"An email has been sent to you!"}),null!==j&&Object(c.jsx)("div",{className:"py-3 bg-red-600 w-full text-white text-center mb-3",children:j}),Object(c.jsx)("label",{htmlFor:"userEmail",className:"w-full block",children:"Email:"}),Object(c.jsx)("input",{type:"email",name:"userEmail",id:"userEmail",value:n,placeholder:"Input your email",onChange:function(e){var t=e.currentTarget,n=t.name,a=t.value;"userEmail"===n&&r(a)},className:"mb-3 w-full px-1 py-2"}),Object(c.jsx)("button",{className:"w-full bg-blue-400 text-white py-3",children:"Send me a reset link"})]}),Object(c.jsx)(u.a,{to:"/",className:"my-2 text-blue-700 hover:text-blue-800 text-center block",children:"\u2190 back to sign in page"})]})]})},Z=n(116),Q=n(118),X=n(113);function Y(){var e=Object(s.useRef)(),t=Object(s.useRef)(),n=Object(s.useState)(""),r=Object(h.a)(n,2),a=r[0],i=r[1],l=Object(s.useState)(!1),o=Object(h.a)(l,2);o[0],o[1];function d(){return(d=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,y();case 4:e.next=11;break;case 6:e.prev=6,e.t0=e.catch(1),i("Failed to sign in"),console.log("Sign in eror"),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}function p(){return(p=Object(b.a)(j.a.mark((function t(n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),r={url:"https://mtt-dev-12744.firebaseapp.com/",handleCodeInApp:!0,iOS:{bundleId:"mtt-dev-12744.firebaseapp.com"},android:{packageName:"https://mtt-dev-12744.firebaseapp.com/",installApp:!0,minimumVersion:"12"},dynamicLinkDomain:"mtt-dev-https://mtt-dev-12744.firebaseapp.com/"},console.log("send Link clicked"+e.current.value),t.prev=3,t.next=6,w(e.current.value,r);case 6:t.next=12;break;case 8:t.prev=8,t.t0=t.catch(3),console.log("send sign in error"),console.log(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[3,8]])})))).apply(this,arguments)}return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(A.a,{className:"d-flex alighn-items-center justify-content-center mt-5",style:{minHeight:"100vh"},children:Object(c.jsxs)("div",{className:"w-100",style:{maxWidth:"400px"},children:[Object(c.jsx)(E.a,{children:Object(c.jsxs)(E.a.Body,{children:[Object(c.jsx)("h2",{className:"text-center",children:"Email Link"}),a&&Object(c.jsx)(D.a,{variant:"danger",children:a}),Object(c.jsxs)(F.a,{onSubmit:function(e){return d.apply(this,arguments)},children:[Object(c.jsxs)(F.a.Group,{id:"email",children:[Object(c.jsx)(F.a.Label,{children:"Email"}),Object(c.jsx)(F.a.Control,{type:"email",ref:e,required:!0,placeholder:"E.g: example@gmail.com"})]}),Object(c.jsxs)(F.a.Group,{id:"password",children:[Object(c.jsx)(F.a.Label,{children:"Password"}),Object(c.jsx)(F.a.Control,{type:"password",ref:t})]}),Object(c.jsx)(P.a,{className:"w-100",type:"submit",children:"Sign In"})]}),Object(c.jsx)(F.a,{onSubmit:function(e){return p.apply(this,arguments)},children:Object(c.jsx)(P.a,{className:"w-100",type:"submit",children:"Send Link"})}),Object(c.jsx)("p",{className:"text-center my-3",children:"or"}),Object(c.jsx)("div",{className:"w-100 text-center mt-3",children:Object(c.jsx)(u.a,{to:C,children:"Forgot Password"})})]})}),Object(c.jsxs)("div",{className:"w-100 text-center mt-2",children:["Need an account? ",Object(c.jsx)(u.a,{to:I,children:"Sign Up"})]})]})})})}var $=function(){return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)(Z.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:[Object(c.jsx)(Z.a.Brand,{href:L,children:"React-Bootstrap"}),Object(c.jsx)(Z.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(c.jsxs)(Z.a.Collapse,{id:"responsive-navbar-nav",children:[Object(c.jsxs)(Q.a,{className:"mr-auto",children:[Object(c.jsx)(Q.a.Link,{href:"#features",children:"Features"}),Object(c.jsx)(Q.a.Link,{href:"#pricing",children:"Pricing"}),Object(c.jsxs)(X.a,{title:"Dropdown",id:"collasible-nav-dropdown",children:[Object(c.jsx)(X.a.Item,{href:L,children:"LOGIN"}),Object(c.jsx)(X.a.Item,{href:I,children:"SIGN UP"}),Object(c.jsx)(X.a.Divider,{}),Object(c.jsx)(X.a.Item,{href:S,children:"CALENDAR t "})]})]}),Object(c.jsxs)(Q.a,{children:[Object(c.jsx)(Q.a.Link,{children:Object(c.jsx)(P.a,{variant:"link",onClick:function(){m.signOut()},children:"Log Out"})}),Object(c.jsx)(Q.a.Link,{eventKey:2,href:"#memes",children:"Dank memes"})]})]})]})})},ee=function(){return Object(c.jsxs)(Z.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:[Object(c.jsx)(Z.a.Brand,{href:L,children:"React-Bootstrap"}),Object(c.jsx)(Z.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(c.jsxs)(Z.a.Collapse,{id:"responsive-navbar-nav",children:[Object(c.jsxs)(Q.a,{className:"mr-auto",children:[Object(c.jsx)(Q.a.Link,{href:"#features",children:"Features"}),Object(c.jsx)(Q.a.Link,{href:"#pricing",children:"Pricing"}),Object(c.jsxs)(X.a,{title:"Dropdown",id:"collasible-nav-dropdown",children:[Object(c.jsx)(X.a.Item,{href:L,children:"LOGIN"}),Object(c.jsx)(X.a.Item,{href:I,children:"SIGN UP"}),Object(c.jsx)(X.a.Item,{href:"/calendar",children:"CALENDAR"}),Object(c.jsx)(X.a.Divider,{}),Object(c.jsx)(X.a.Item,{href:S,children:"CALENDAR t "})]})]}),Object(c.jsx)(Q.a,{children:Object(c.jsx)(Q.a.Link,{eventKey:2,href:"#memes",children:"Dank memes"})})]})]})},te=function(){var e=Object(s.useContext)(z);return e?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)($,{}),e.roles.manager&&Object(c.jsx)(K,{})||e.roles.admin&&Object(c.jsx)(K,{})||e.roles.worker&&Object(c.jsx)(K,{})]}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(ee,{}),Object(c.jsxs)(u.b,{children:[Object(c.jsx)(B,{path:I}),Object(c.jsx)(G,{path:L}),Object(c.jsx)(_,{path:C}),Object(c.jsx)(B,{path:I}),Object(c.jsx)(Y,{path:"email-link"})]})]})},ne=function(){return Object(c.jsx)(J,{children:Object(c.jsx)(te,{})})},re=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,120)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},ae=n(72),ce=n(23),se=n(49),ie=Object(se.b)({name:"calendar",initialState:{date:"",week:0,calendarTitle:"",viewType:"MONTH"},reducers:{currentDateAction:function(e,t){var n=t.payload.newDate;e.date=n},selectedWeekAction:function(e,t){var n=t.payload.newWeek;e.week=n},currentTitleAction:function(e,t){var n=t.payload.newTitle;e.calendarTitle=n},currentViewAction:function(e,t){var n=t.payload.newView;e.viewType=n}}}),le=ie.actions,oe=(le.currentDateAction,le.selectedWeekAction,le.currentTitleAction,le.currentViewAction,ie.reducer),ue=Object(ce.c)({calendar:oe}),de=Object(se.a)({reducer:ue});n(105);o.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(ae.a,{store:de,children:Object(c.jsx)(ne,{})})}),document.getElementById("root")),re()}},[[106,1,2]]]);
//# sourceMappingURL=main.b251cc87.chunk.js.map